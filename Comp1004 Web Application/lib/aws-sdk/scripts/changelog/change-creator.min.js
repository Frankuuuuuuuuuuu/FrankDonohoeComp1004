/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/aws-sdk@2.1342.0/scripts/changelog/change-creator.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var fs=require("fs"),path=require("path"),crypto=require("crypto");function checkProperty(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function generateRandomIdentifier(){return crypto.randomBytes(4).toString("hex")}function sanitizeFileName(e){return e.replace(/[^a-zA-Z0-9\\.]/g,"-")}var CHANGES_DIR=path.join(process.cwd(),".changes"),VALID_TYPES=Object.create(null);function ChangeCreator(e){this._config=e||{},this._type="",this._category="",this._description=""}VALID_TYPES.bugfix=!0,VALID_TYPES.feature=!0,ChangeCreator.prototype={getChangeType:function(){return this._type},setChangeType:function(e){this._type=e},getChangeCategory:function(){return this._category},setChangeCategory:function(e){this._category=e},getChangeDescription:function(){return this._description},setChangeDescription:function(e){this._description=e},validateChange:function(){var e=this.getChangeType(),t=this.getChangeCategory(),i=this.getChangeDescription();return this.validateChangeType(e),this.validateChangeCategory(t),this.validateChangeDescription(i),this},validateChangeType:function(e){if(!(e=e||this._type))throw new Error("ValidationError: Missing `type` field.");if(VALID_TYPES[e])return this;var t=Object.keys(VALID_TYPES).join(",");throw new Error('ValidationError: `type` set as "'+e+'" but must be one of ['+t+"].")},validateChangeCategory:function(e){if(!(e=e||this._category))throw new Error("ValidationError: Missing `category` field.");return this},validateChangeDescription:function(e){if(!(e=e||this._description))throw new Error("ValidationError: Missing `description` field.");return this},createOutputDirectory:function(e){for(var t=path.parse(e),i=path.sep,r=t.dir.split(i)||[],n=0;n<r.length;n++){var a=r.slice(0,n+1).join(i);if(a)try{fs.statSync(a)}catch(e){if("ENOENT"!==e.code)throw e;fs.mkdirSync(a)}}return this},determineWriteLocation:function(){var e=this._config||{};if(checkProperty(e,"outFile")&&e.outFile)return e.outFile;if(checkProperty(e,"inFile")&&e.inFile)return e.inFile;var t=sanitizeFileName(this._type)+"-"+sanitizeFileName(this._category)+"-"+generateRandomIdentifier()+".json";return path.join(process.cwd(),".changes","next-release",t)},writeChanges:function(e){var t="function"==typeof e,i=this.determineWriteLocation();try{this.validateChange().createOutputDirectory(i);var r={type:this.getChangeType(),category:this.getChangeCategory(),description:this.getChangeDescription()};fs.writeFileSync(i,JSON.stringify(r,null,2));var n={file:i};return t?e(null,n):n}catch(i){if(t)return e(i,null);throw i}}},module.exports={ChangeCreator:ChangeCreator,VALID_TYPES:VALID_TYPES};
//# sourceMappingURL=/sm/a505069c1601d6f0509074e6dd4f83f0032ccf04941b4bad4b3def2e34cb9743.map
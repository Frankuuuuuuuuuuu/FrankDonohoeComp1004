/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/aws-sdk@2.1342.0/dist-tools/service-collector.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var fs=require("fs"),util=require("util"),path=require("path"),AWS=require("../"),apis=require("../lib/api_loader"),metadata=require("../apis/metadata"),ClientCreator=require("./client-creator"),clientCreator=new ClientCreator,defaultServices=clientCreator.getDefaultServices().join(","),sanitizeRegex=/[^a-zA-Z0-9,-]/,serviceClasses={};function getServiceHeader(e){if("all"===e)return Object.keys(serviceClasses).map((function(e){return getServiceHeader(e)})).join("\n");if(!serviceClasses[e])return null;var r=serviceClasses[e].apiVersions.map((function(e){return e.indexOf("*")>=0?null:e})).filter((function(e){return null!==e})),i=util.format("if (!Object.prototype.hasOwnProperty.call(AWS, '"+metadata[e].name+"')) {\n  AWS.apiLoader.services['%s'] = {};\n  AWS.%s = AWS.Service.defineService('%s', %s);\n",e,metadata[e].name,e,util.inspect(r)),t=path.join(__dirname,"..","lib","services",e+".js");return fs.existsSync(t)&&(i+="  require('./services/"+e+"');\n"),i+="}\n"}function getService(e,r){if("all"===e)return Object.keys(serviceClasses).map((function(e){return serviceClasses[e].apiVersions.map((function(r){return r.indexOf("*")>=0?null:getService(e,r)})).filter((function(e){return null!==e})).join("\n")})).join("\n");var i,t;if(!serviceClasses[e])return null;try{t=(i=new(0,serviceClasses[e])({apiVersion:r,endpoint:"localhost"})).api}catch(e){return null}var a=metadata[e].prefix||e,n=[],s=util.format("AWS.apiLoader.services['%s']['%s'] = %s;\n",e,i.api.apiVersion,"require('../apis/"+a+"-"+i.api.apiVersion+".min')");return n.push(s),Object.prototype.hasOwnProperty.call(t,"paginators")&&Object.keys(t.paginators).length&&(s=util.format("AWS.apiLoader.services['%s']['%s'].paginators = %s;\n",e,i.api.apiVersion,"require('../apis/"+a+"-"+i.api.apiVersion+".paginators').pagination"),n.push(s)),Object.prototype.hasOwnProperty.call(t,"waiters")&&Object.keys(t.waiters).length&&(s=util.format("AWS.apiLoader.services['%s']['%s'].waiters = %s;\n",e,i.api.apiVersion,"require('../apis/"+a+"-"+i.api.apiVersion+".waiters2').waiters"),n.push(s)),n.join("")}function ServiceCollector(e){var r={};var i="",t=!1;if(e||(t=!0,e=defaultServices),e.match(sanitizeRegex))throw new Error("Incorrectly formatted service names");var a=[];if(e.split(",").sort().forEach((function(e){if(!(["cognitoidentity","sts"].indexOf(e)>=0))try{i+=function(e,i){var t,a,n=e.match(/^(.+?)(?:-(.+?))?$/),s=n[1],o=n[2]||"latest",l=[];if(!r[s])if(r[s]={},null===(t=getServiceHeader(s))){if(!i)throw(a=new Error("Invalid module: "+s)).name="InvalidModuleError",a}else l.push(t);if(!r[s][o])if(r[s][o]=!0,null===(t=getService(s,o))){if(!i)throw(a=new Error("Invalid module: "+s+"-"+o)).name="InvalidModuleError",a}else l.push(t);return l.join("")}(e,t)+"\n"}catch(r){if("InvalidModuleError"!==r.name)throw r;a.push(e)}})),a.length>0)throw new Error("Missing modules: "+a.join(", "));return i}Object.keys(AWS).forEach((function(e){AWS[e].serviceIdentifier&&(serviceClasses[AWS[e].serviceIdentifier]=AWS[e])})),module.exports=ServiceCollector;
//# sourceMappingURL=/sm/415bc5e714897b286570bc6db746ddb81ae9c3fa517face9433fd987708c95cb.map
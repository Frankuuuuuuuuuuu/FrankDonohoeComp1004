/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/aws-sdk@2.1342.0/lib/signers/s3.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var AWS=require("../core"),inherit=AWS.util.inherit;AWS.Signers.S3=inherit(AWS.Signers.RequestSigner,{subResources:{acl:1,accelerate:1,analytics:1,cors:1,lifecycle:1,delete:1,inventory:1,location:1,logging:1,metrics:1,notification:1,partNumber:1,policy:1,requestPayment:1,replication:1,restore:1,tagging:1,torrent:1,uploadId:1,uploads:1,versionId:1,versioning:1,versions:1,website:1},responseHeaders:{"response-content-type":1,"response-content-language":1,"response-expires":1,"response-cache-control":1,"response-content-disposition":1,"response-content-encoding":1},addAuthorization:function(e,s){this.request.headers["presigned-expires"]||(this.request.headers["X-Amz-Date"]=AWS.util.date.rfc822(s)),e.sessionToken&&(this.request.headers["x-amz-security-token"]=e.sessionToken);var t=this.sign(e.secretAccessKey,this.stringToSign()),n="AWS "+e.accessKeyId+":"+t;this.request.headers.Authorization=n},stringToSign:function(){var e=this.request,s=[];s.push(e.method),s.push(e.headers["Content-MD5"]||""),s.push(e.headers["Content-Type"]||""),s.push(e.headers["presigned-expires"]||"");var t=this.canonicalizedAmzHeaders();return t&&s.push(t),s.push(this.canonicalizedResource()),s.join("\n")},canonicalizedAmzHeaders:function(){var e=[];AWS.util.each(this.request.headers,(function(s){s.match(/^x-amz-/i)&&e.push(s)})),e.sort((function(e,s){return e.toLowerCase()<s.toLowerCase()?-1:1}));var s=[];return AWS.util.arrayEach.call(this,e,(function(e){s.push(e.toLowerCase()+":"+String(this.request.headers[e]))})),s.join("\n")},canonicalizedResource:function(){var e=this.request,s=e.path.split("?"),t=s[0],n=s[1],r="";if(e.virtualHostedBucket&&(r+="/"+e.virtualHostedBucket),r+=t,n){var i=[];AWS.util.arrayEach.call(this,n.split("&"),(function(e){var s=e.split("=")[0],t=e.split("=")[1];if(this.subResources[s]||this.responseHeaders[s]){var n={name:s};void 0!==t&&(this.subResources[s]?n.value=t:n.value=decodeURIComponent(t)),i.push(n)}})),i.sort((function(e,s){return e.name<s.name?-1:1})),i.length&&(n=[],AWS.util.arrayEach(i,(function(e){void 0===e.value?n.push(e.name):n.push(e.name+"="+e.value)})),r+="?"+n.join("&"))}return r},sign:function(e,s){return AWS.util.crypto.hmac(e,s,"base64","sha1")}}),module.exports=AWS.Signers.S3;
//# sourceMappingURL=/sm/e2871005e9c0364fc5355d092e7ce3d94ab5ba352acd084af731cd9bf25c7060.map
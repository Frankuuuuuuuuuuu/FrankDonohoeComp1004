/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/aws-sdk@2.1342.0/lib/services/glacier.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var AWS=require("../core");AWS.util.update(AWS.Glacier.prototype,{setupRequestListeners:function(e){Array.isArray(e._events.validate)?e._events.validate.unshift(this.validateAccountId):e.on("validate",this.validateAccountId),e.removeListener("afterBuild",AWS.EventListeners.Core.COMPUTE_SHA256),e.on("build",this.addGlacierApiVersion),e.on("build",this.addTreeHashHeaders)},validateAccountId:function(e){void 0===e.params.accountId&&(e.params=AWS.util.copy(e.params),e.params.accountId="-")},addGlacierApiVersion:function(e){var t=e.service.api.apiVersion;e.httpRequest.headers["x-amz-glacier-version"]=t},addTreeHashHeaders:function(e){if(void 0!==e.params.body){var t=e.service.computeChecksums(e.params.body);e.httpRequest.headers["X-Amz-Content-Sha256"]=t.linearHash,e.httpRequest.headers["x-amz-sha256-tree-hash"]||(e.httpRequest.headers["x-amz-sha256-tree-hash"]=t.treeHash)}},computeChecksums:function(e){AWS.util.Buffer.isBuffer(e)||(e=AWS.util.buffer.toBuffer(e));for(var t=1048576,a=[],r=AWS.util.crypto.createHash("sha256"),i=0;i<e.length;i+=t){var s=e.slice(i,Math.min(i+t,e.length));r.update(s),a.push(AWS.util.crypto.sha256(s))}return{linearHash:r.digest("hex"),treeHash:this.buildHashTree(a)}},buildHashTree:function(e){for(;e.length>1;){for(var t=[],a=0;a<e.length;a+=2)if(e[a+1]){var r=AWS.util.buffer.alloc(64);r.write(e[a],0,32,"binary"),r.write(e[a+1],32,32,"binary"),t.push(AWS.util.crypto.sha256(r))}else t.push(e[a]);e=t}return AWS.util.crypto.toHex(e[0])}});
//# sourceMappingURL=/sm/b6f3062bfb0a78766bf7cc01961141022a6d2cb928e2c3f93e2ca397815ca584.map
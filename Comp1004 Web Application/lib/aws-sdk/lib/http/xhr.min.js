/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/aws-sdk@2.1342.0/lib/http/xhr.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var AWS=require("../core"),EventEmitter=require("events").EventEmitter;require("../http"),AWS.XHRClient=AWS.util.inherit({handleRequest:function(e,t,r,n){var s=this,o=e.endpoint,i=new EventEmitter,a=o.protocol+"//"+o.hostname;80!==o.port&&443!==o.port&&(a+=":"+o.port),a+=e.path;var u=new XMLHttpRequest,d=!1;e.stream=u,u.addEventListener("readystatechange",(function(){try{if(0===u.status)return}catch(e){return}this.readyState>=this.HEADERS_RECEIVED&&!d&&(i.statusCode=u.status,i.headers=s.parseHeaders(u.getAllResponseHeaders()),i.emit("headers",i.statusCode,i.headers,u.statusText),d=!0),this.readyState===this.DONE&&s.finishRequest(u,i)}),!1),u.upload.addEventListener("progress",(function(e){i.emit("sendProgress",e)})),u.addEventListener("progress",(function(e){i.emit("receiveProgress",e)}),!1),u.addEventListener("timeout",(function(){n(AWS.util.error(new Error("Timeout"),{code:"TimeoutError"}))}),!1),u.addEventListener("error",(function(){n(AWS.util.error(new Error("Network Failure"),{code:"NetworkingError"}))}),!1),u.addEventListener("abort",(function(){n(AWS.util.error(new Error("Request aborted"),{code:"RequestAbortedError"}))}),!1),r(i),u.open(e.method,a,!1!==t.xhrAsync),AWS.util.each(e.headers,(function(e,t){"Content-Length"!==e&&"User-Agent"!==e&&"Host"!==e&&u.setRequestHeader(e,t)})),t.timeout&&!1!==t.xhrAsync&&(u.timeout=t.timeout),t.xhrWithCredentials&&(u.withCredentials=!0);try{u.responseType="arraybuffer"}catch(e){}try{e.body?u.send(e.body):u.send()}catch(t){if(!e.body||"object"!=typeof e.body.buffer)throw t;u.send(e.body.buffer)}return i},parseHeaders:function(e){var t={};return AWS.util.arrayEach(e.split(/\r?\n/),(function(e){var r=e.split(":",1)[0],n=e.substring(r.length+2);r.length>0&&(t[r.toLowerCase()]=n)})),t},finishRequest:function(e,t){var r;if("arraybuffer"===e.responseType&&e.response){var n=e.response;r=new AWS.util.Buffer(n.byteLength);for(var s=new Uint8Array(n),o=0;o<r.length;++o)r[o]=s[o]}try{r||"string"!=typeof e.responseText||(r=new AWS.util.Buffer(e.responseText))}catch(e){}r&&t.emit("data",r),t.emit("end")}}),AWS.HttpClient.prototype=AWS.XHRClient.prototype,AWS.HttpClient.streamsApiVersion=1;
//# sourceMappingURL=/sm/9f2c9b17fcebd3c7d37425c73ea38b999c3ec1c2bfc09afa11335de661e830e9.map
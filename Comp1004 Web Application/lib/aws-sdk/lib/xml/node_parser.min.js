/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/aws-sdk@2.1342.0/lib/xml/node_parser.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var AWS=require("../core"),util=AWS.util,Shape=AWS.Model.Shape,xml2js=require("xml2js"),options={explicitCharkey:!1,trim:!1,normalize:!1,explicitRoot:!1,emptyTag:null,explicitArray:!0,ignoreAttrs:!1,mergeAttrs:!1,validator:null};function NodeXmlParser(){}function parseXml(r,e){switch(e.type){case"structure":return parseStructure(r,e);case"map":return parseMap(r,e);case"list":return parseList(r,e);case void 0:case null:return parseUnknown(r);default:return parseScalar(r,e)}}function parseStructure(r,e){var a={};return null===r||util.each(e.members,(function(t,n){var l=n.name;if(Object.prototype.hasOwnProperty.call(r,l)&&Array.isArray(r[l])){var s=r[l];n.flattened||(s=s[0]),a[t]=parseXml(s,n)}else n.isXmlAttribute&&r.$&&Object.prototype.hasOwnProperty.call(r.$,l)?a[t]=parseScalar(r.$[l],n):"list"!==n.type||e.api.xmlNoDefaultLists||(a[t]=n.defaultValue)})),a}function parseMap(r,e){var a={};if(null===r)return a;var t=e.key.name||"key",n=e.value.name||"value",l=e.flattened?r:r.entry;return Array.isArray(l)&&util.arrayEach(l,(function(r){a[r[t][0]]=parseXml(r[n][0],e.value)})),a}function parseList(r,e){var a=[],t=e.member.name||"member";return e.flattened?util.arrayEach(r,(function(r){a.push(parseXml(r,e.member))})):r&&Array.isArray(r[t])&&util.arrayEach(r[t],(function(r){a.push(parseXml(r,e.member))})),a}function parseScalar(r,e){return r&&r.$&&"base64"===r.$.encoding&&(e=new Shape.create({type:r.$.encoding})),r&&r._&&(r=r._),"function"==typeof e.toType?e.toType(r):r}function parseUnknown(r){if(null==r)return"";if("string"==typeof r)return r;if(Array.isArray(r)){var e=[];for(a=0;a<r.length;a++)e.push(parseXml(r[a],{}));return e}var a,t=Object.keys(r);if(0===t.length||1===t.length&&"$"===t[0])return{};var n={};for(a=0;a<t.length;a++){var l=t[a],s=r[l];"$"!==l&&(s.length>1?n[l]=parseList(s,{member:{}}):n[l]=parseXml(s[0],{}))}return n}NodeXmlParser.prototype.parse=function(r,e){e=e||{};var a=null,t=null;if(new xml2js.Parser(options).parseString(r,(function(r,e){t=r,a=e})),a){var n=parseXml(a,e);return a.ResponseMetadata&&(n.ResponseMetadata=parseXml(a.ResponseMetadata[0],{})),n}if(t)throw util.error(t,{code:"XMLParserError",retryable:!0});return parseXml({},e)},module.exports=NodeXmlParser;
//# sourceMappingURL=/sm/c5e6eacf2bfe7320bf6b5e667e56422ef0413a7dc40ff9afe33b001d6568ae41.map
/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/aws-sdk@2.1342.0/lib/credentials/process_credentials.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var AWS=require("../core"),proc=require("child_process"),iniLoader=AWS.util.iniLoader;AWS.ProcessCredentials=AWS.util.inherit(AWS.Credentials,{constructor:function(e){AWS.Credentials.call(this),e=e||{},this.filename=e.filename,this.profile=e.profile||process.env.AWS_PROFILE||AWS.util.defaultProfile,this.get(e.callback||AWS.util.fn.noop)},load:function(e){var r=this;try{var i=AWS.util.getProfilesFromSharedConfig(iniLoader,this.filename)[this.profile]||{};if(0===Object.keys(i).length)throw AWS.util.error(new Error("Profile "+this.profile+" not found"),{code:"ProcessCredentialsProviderFailure"});if(!i.credential_process)throw AWS.util.error(new Error("Profile "+this.profile+" did not include credential process"),{code:"ProcessCredentialsProviderFailure"});this.loadViaCredentialProcess(i,(function(i,o){i?e(i,null):(r.expired=!1,r.accessKeyId=o.AccessKeyId,r.secretAccessKey=o.SecretAccessKey,r.sessionToken=o.SessionToken,o.Expiration&&(r.expireTime=new Date(o.Expiration)),e(null))}))}catch(r){e(r)}},loadViaCredentialProcess:function(e,r){proc.exec(e.credential_process,{env:process.env},(function(e,i,o){if(e)r(AWS.util.error(new Error("credential_process returned error"),{code:"ProcessCredentialsProviderFailure"}),null);else try{var s=JSON.parse(i);if(s.Expiration){var t=AWS.util.date.getDate();if(new Date(s.Expiration)<t)throw Error("credential_process returned expired credentials")}if(1!==s.Version)throw Error("credential_process does not return Version == 1");r(null,s)}catch(e){r(AWS.util.error(new Error(e.message),{code:"ProcessCredentialsProviderFailure"}),null)}}))},refresh:function(e){iniLoader.clearCachedFiles(),this.coalesceRefresh(e||AWS.util.fn.callback)}});
//# sourceMappingURL=/sm/071dc2917d28a981bed1c58a29ff367b719b79de8e44ed1bbed80bcf4e89e49a.map
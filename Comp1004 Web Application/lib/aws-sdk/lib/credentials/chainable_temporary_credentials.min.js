/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/aws-sdk@2.1342.0/lib/credentials/chainable_temporary_credentials.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var AWS=require("../core"),STS=require("../../clients/sts");AWS.ChainableTemporaryCredentials=AWS.util.inherit(AWS.Credentials,{constructor:function(e){AWS.Credentials.call(this),e=e||{},this.errorCode="ChainableTemporaryCredentialsProviderFailure",this.expired=!0,this.tokenCodeFn=null;var r=AWS.util.copy(e.params)||{};if(r.RoleArn&&(r.RoleSessionName=r.RoleSessionName||"temporary-credentials"),r.SerialNumber){if(!e.tokenCodeFn||"function"!=typeof e.tokenCodeFn)throw new AWS.util.error(new Error("tokenCodeFn must be a function when params.SerialNumber is given"),{code:this.errorCode});this.tokenCodeFn=e.tokenCodeFn}var n=AWS.util.merge({params:r,credentials:e.masterCredentials||AWS.config.credentials},e.stsConfig||{});this.service=new STS(n)},refresh:function(e){this.coalesceRefresh(e||AWS.util.fn.callback)},load:function(e){var r=this,n=r.service.config.params.RoleArn?"assumeRole":"getSessionToken";this.getTokenCode((function(o,i){var t={};o?e(o):(i&&(t.TokenCode=i),r.service[n](t,(function(n,o){n||r.service.credentialsFrom(o,r),e(n)})))}))},getTokenCode:function(e){var r=this;this.tokenCodeFn?this.tokenCodeFn(this.service.config.params.SerialNumber,(function(n,o){if(n){var i=n;return n instanceof Error&&(i=n.message),void e(AWS.util.error(new Error("Error fetching MFA token: "+i),{code:r.errorCode}))}e(null,o)})):e(null)}});
//# sourceMappingURL=/sm/25b837d16ee2e9f7a048f2bf98c4a31c7106a10b4abcb2dcb90eae0c04567829.map
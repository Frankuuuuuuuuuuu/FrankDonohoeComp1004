/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/aws-sdk@2.1342.0/lib/protocol/json.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var util=require("../util"),JsonBuilder=require("../json/builder"),JsonParser=require("../json/parser"),populateHostPrefix=require("./helpers").populateHostPrefix;function buildRequest(e){var t=e.httpRequest,r=e.service.api,s=r.targetPrefix+"."+r.operations[e.operation].name,o=r.jsonVersion||"1.0",a=r.operations[e.operation].input,i=new JsonBuilder;1===o&&(o="1.0"),t.body=i.build(e.params||{},a),t.headers["Content-Type"]="application/x-amz-json-"+o,t.headers["X-Amz-Target"]=s,populateHostPrefix(e)}function extractError(e){var t={},r=e.httpResponse;if(t.code=r.headers["x-amzn-errortype"]||"UnknownError","string"==typeof t.code&&(t.code=t.code.split(":")[0]),r.body.length>0)try{var s=JSON.parse(r.body.toString()),o=s.__type||s.code||s.Code;o&&(t.code=o.split("#").pop()),"RequestEntityTooLarge"===t.code?t.message="Request body must be less than 1 MB":t.message=s.message||s.Message||null}catch(s){t.statusCode=r.statusCode,t.message=r.statusMessage}else t.statusCode=r.statusCode,t.message=r.statusCode.toString();e.error=util.error(new Error,t)}function extractData(e){var t=e.httpResponse.body.toString()||"{}";if(!1===e.request.service.config.convertResponseTypes)e.data=JSON.parse(t);else{var r=e.request.service.api.operations[e.request.operation].output||{},s=new JsonParser;e.data=s.parse(t,r)}}module.exports={buildRequest:buildRequest,extractError:extractError,extractData:extractData};
//# sourceMappingURL=/sm/cee271c8986939a92246265a050b44698bc24ceb48933cc10da4735bd3a027c9.map
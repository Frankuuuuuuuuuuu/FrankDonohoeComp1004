/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/aws-sdk@2.1342.0/lib/protocol/query.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var AWS=require("../core"),util=require("../util"),QueryParamSerializer=require("../query/query_param_serializer"),Shape=require("../model/shape"),populateHostPrefix=require("./helpers").populateHostPrefix;function buildRequest(e){var r=e.service.api.operations[e.operation],t=e.httpRequest;t.headers["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8",t.params={Version:e.service.api.apiVersion,Action:r.name},(new QueryParamSerializer).serialize(e.params,r.input,(function(e,r){t.params[e]=r})),t.body=util.queryParamsToString(t.params),populateHostPrefix(e)}function extractError(e){var r,t=e.httpResponse.body.toString();if(t.match("<UnknownOperationException"))r={Code:"UnknownOperation",Message:"Unknown operation "+e.request.operation};else try{r=(new AWS.XML.Parser).parse(t)}catch(t){r={Code:e.httpResponse.statusCode,Message:e.httpResponse.statusMessage}}r.requestId&&!e.requestId&&(e.requestId=r.requestId),r.Errors&&(r=r.Errors),r.Error&&(r=r.Error),r.Code?e.error=util.error(new Error,{code:r.Code,message:r.Message}):e.error=util.error(new Error,{code:e.httpResponse.statusCode,message:null})}function extractData(e){var r=e.request,t=r.service.api.operations[r.operation].output||{},a=t;if(a.resultWrapper){var s=Shape.create({type:"structure"});s.members[a.resultWrapper]=t,s.memberNames=[a.resultWrapper],util.property(t,"name",t.resultWrapper),t=s}var o=new AWS.XML.Parser;if(t&&t.members&&!t.members._XAMZRequestId){var p=Shape.create({type:"string"},{api:{protocol:"query"}},"requestId");t.members._XAMZRequestId=p}var u=o.parse(e.httpResponse.body.toString(),t);e.requestId=u._XAMZRequestId||u.requestId,u._XAMZRequestId&&delete u._XAMZRequestId,a.resultWrapper&&u[a.resultWrapper]&&(util.update(u,u[a.resultWrapper]),delete u[a.resultWrapper]),e.data=u}module.exports={buildRequest:buildRequest,extractError:extractError,extractData:extractData};
//# sourceMappingURL=/sm/cdfe673cc63ecc9b53971a7ce212f373e51e86049f44bcf24595bdb2f088e7b9.map
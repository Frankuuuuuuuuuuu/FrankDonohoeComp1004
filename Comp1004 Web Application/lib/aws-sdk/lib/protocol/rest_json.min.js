/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/aws-sdk@2.1342.0/lib/protocol/rest_json.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var util=require("../util"),Rest=require("./rest"),Json=require("./json"),JsonBuilder=require("../json/builder"),JsonParser=require("../json/parser"),METHODS_WITHOUT_BODY=["GET","HEAD","DELETE"];function unsetContentLength(e){void 0===util.getRequestPayloadShape(e)&&METHODS_WITHOUT_BODY.indexOf(e.httpRequest.method)>=0&&delete e.httpRequest.headers["Content-Length"]}function populateBody(e){var t=new JsonBuilder,a=e.service.api.operations[e.operation].input;if(a.payload){var r,n=a.members[a.payload];r=e.params[a.payload],"structure"===n.type?(e.httpRequest.body=t.build(r||{},n),applyContentTypeHeader(e)):void 0!==r&&(e.httpRequest.body=r,("binary"===n.type||n.isStreaming)&&applyContentTypeHeader(e,!0))}else e.httpRequest.body=t.build(e.params,a),applyContentTypeHeader(e)}function applyContentTypeHeader(e,t){if(!e.httpRequest.headers["Content-Type"]){var a=t?"binary/octet-stream":"application/json";e.httpRequest.headers["Content-Type"]=a}}function buildRequest(e){Rest.buildRequest(e),METHODS_WITHOUT_BODY.indexOf(e.httpRequest.method)<0&&populateBody(e)}function extractError(e){Json.extractError(e)}function extractData(e){Rest.extractData(e);var t=e.request,a=t.service.api.operations[t.operation],r=t.service.api.operations[t.operation].output||{};a.hasEventOutput;if(r.payload){var n=r.members[r.payload],o=e.httpResponse.body;if(n.isEventStream)s=new JsonParser,e.data[payload]=util.createEventStream(2===AWS.HttpClient.streamsApiVersion?e.httpResponse.stream:o,s,n);else if("structure"===n.type||"list"===n.type){var s=new JsonParser;e.data[r.payload]=s.parse(o,n)}else"binary"===n.type||n.isStreaming?e.data[r.payload]=o:e.data[r.payload]=n.toType(o)}else{var p=e.data;Json.extractData(e),e.data=util.merge(p,e.data)}}module.exports={buildRequest:buildRequest,extractError:extractError,extractData:extractData,unsetContentLength:unsetContentLength};
//# sourceMappingURL=/sm/d7e9805e12c86f79272aa9bc9d6b83d74d7903bf4caceca69b745d5e24a506be.map
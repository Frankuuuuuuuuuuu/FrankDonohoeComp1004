/**
 * Minified by jsDelivr using Terser v5.15.1.
 * Original file: /npm/aws-sdk@2.1342.0/lib/protocol/helpers.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var util=require("../util"),AWS=require("../core");function populateHostPrefix(e){if(!e.service.config.hostPrefixEnabled)return e;var t=e.service.api.operations[e.operation];if(hasEndpointDiscover(e))return e;if(t.endpoint&&t.endpoint.hostPrefix){var r=expandHostPrefix(t.endpoint.hostPrefix,e.params,t.input);prependEndpointPrefix(e.httpRequest.endpoint,r),validateHostname(e.httpRequest.endpoint.hostname)}return e}function hasEndpointDiscover(e){var t=e.service.api,r=t.operations[e.operation],n=t.endpointOperation&&t.endpointOperation===util.string.lowerFirst(r.name);return"NULL"!==r.endpointDiscoveryRequired||!0===n}function expandHostPrefix(e,t,r){return util.each(r.members,(function(r,n){if(!0===n.hostLabel){if("string"!=typeof t[r]||""===t[r])throw util.error(new Error,{message:"Parameter "+r+" should be a non-empty string.",code:"InvalidParameter"});var o=new RegExp("\\{"+r+"\\}","g");e=e.replace(o,t[r])}})),e}function prependEndpointPrefix(e,t){e.host&&(e.host=t+e.host),e.hostname&&(e.hostname=t+e.hostname)}function validateHostname(e){var t=e.split("."),r=/^[a-zA-Z0-9]{1}$|^[a-zA-Z0-9][a-zA-Z0-9\-]*[a-zA-Z0-9]$/;util.arrayEach(t,(function(e){if(!e.length||e.length<1||e.length>63)throw util.error(new Error,{code:"ValidationError",message:"Hostname label length should be between 1 to 63 characters, inclusive."});if(!r.test(e))throw AWS.util.error(new Error,{code:"ValidationError",message:e+" is not hostname compatible."})}))}module.exports={populateHostPrefix:populateHostPrefix};
//# sourceMappingURL=/sm/b47e978ffa2a76b37b80a4fed868530c127a44bec291de5b53f85aa7801afd5c.map